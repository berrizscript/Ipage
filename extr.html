<html><head><base href="iPage">
  <meta charset="UTF-8">
  <title>iPage - The Apple Browser</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }

    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      background: #f5f5f7;
      color: #1d1d1f;
      overflow-y: auto;
    }

    .browser-container {
      max-width: none;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;  
      flex-direction: column;
    }

    .browser-header {
      position: sticky;
      top: 0;
      z-index: 1000;
      background: linear-gradient(180deg, #ffffff 0%, #f5f5f7 100%);
      padding: 8px 16px;  /* Reduced padding */
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      margin: 0;  /* Remove margin */
      transition: all 0.3s ease;
    }

    .browser-header.minimized {
      padding: 10px 30px;
      cursor: pointer;
    }

    .browser-header.minimized .tabs-container,
    .browser-header.minimized .address-bar,
    .browser-header.minimized .toggle-sidebar {
      display: none;
    }

    .tabs-container {
      display: flex;
      align-items: center;
      padding: 0 44px;
      margin-bottom: 6px;  /* Reduced margin */
    }

    .tab {
      display: flex;
      align-items: center;
      padding: 6px 16px;
      background: #ffffff;
      border-radius: 8px;
      margin-right: 10px;
      cursor: pointer;
      transition: background 0.2s;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    .tab.active {
      background: #f5f5f7;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    }

    .tab-title {
      margin-right: 10px;
      font-size: 14px;
      color: #1d1d1f;
    }

    .tab-close {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: none;
      border: none;
      cursor: pointer;
      padding: 2px;
    }

    .tab-close:hover {
      background: #e5e5e7;
    }

    .new-tab-button {
      background: none;
      border: none;
      padding: 8px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .new-tab-button svg {
      width: 20px;
      height: 20px;
      fill: #1d1d1f;
    }

    .address-bar {
      background: #ffffff;
      border-radius: 8px;
      padding: 6px 16px;  /* Reduced padding */
      display: flex;
      align-items: center;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      margin: 0 44px;  /* Change margin-left to symmetric margins */
    }

    .url-input {
      flex: 1;
      border: none;
      outline: none;
      font-size: 15px;
      color: #1d1d1f;
      margin: 0 15px;
      height: 24px;
    }

    .browser-content {
      flex: 1;
      margin: 0;  /* Remove margin */
      background: #ffffff;
      padding: 0;  /* Remove padding */
      min-height: calc(100vh - 100px);
    }

    .browser-content iframe {
      width: 100%;
      height: calc(100vh - 100px);
      border: none;
    }

    .apple-logo {
      width: 24px;
      height: 24px;
      fill: #1d1d1f;
    }

    .sidebar {
      position: fixed;
      left: -250px;
      top: 0;
      width: 250px;
      height: 100%;
      background: #ffffff;
      box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
      transition: left 0.3s ease;
      z-index: 1000;
    }

    .sidebar.open {
      left: 0;
    }

    .sidebar-button {
      display: flex;
      align-items: center;
      width: 100%;
      padding: 15px 25px;
      border: none;
      background: none;
      text-align: left;
      font-size: 16px;
      color: #1d1d1f;
      cursor: pointer;
      transition: background 0.2s;
    }

    .sidebar-button:hover {
      background: #f5f5f7;
    }

    .sidebar-button svg {
      width: 20px;
      height: 20px;
      margin-right: 12px;
      fill: #1d1d1f;
    }

    .toggle-sidebar {
      position: absolute;
      left: 30px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      cursor: pointer;
      padding: 10px;
      z-index: 999;
    }

    .toggle-sidebar svg {
      width: 24px;
      height: 24px;
      fill: #1d1d1f;
    }

    .close-sidebar {
      position: absolute;
      top: 20px;
      right: 20px;
      background: none;
      border: none;
      cursor: pointer;
      padding: 5px;
    }

    .close-sidebar svg {
      width: 20px;
      height: 20px;
      fill: #1d1d1f;
    }

    .sidebar-content {
      padding-top: 60px;
    }

    @keyframes gradient {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Add to the style section */
    .browser-header.minimized .tabs-container,
    .browser-header.minimized .address-bar {
      display: none;
    }

    .browser-header.minimized {
      padding: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="browser-container">
    <div class="browser-header">
      <div class="tabs-container">
        <div class="tab active" data-tab-id="tab-initial">
          <span class="tab-title">AirTab</span>
          <button class="tab-close">
            <svg viewBox="0 0 24 24" width="12" height="12">
              <path fill="#1d1d1f" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
            </svg>
          </button>
        </div>
        <button class="new-tab-button">
          <svg viewBox="0 0 24 24">
            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
          </svg>
        </button>
      </div>
      <button class="toggle-sidebar">
        <svg viewBox="0 0 24 24">
          <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
        </svg>
      </button>
      <div class="address-bar">
        <svg class="apple-logo" viewBox="0 0 170 170">
          <path d="M150.37 130.25c-2.45 5.66-5.35 10.87-8.71 15.66-4.58 6.53-8.33 11.05-11.22 13.56-4.48 4.12-9.28 6.23-14.42 6.35-3.69 0-8.14-1.05-13.32-3.18-5.197-2.12-9.973-3.17-14.34-3.17-4.58 0-9.492 1.05-14.746 3.17-5.262 2.13-9.501 3.24-12.742 3.35-4.929 0.21-9.842-1.96-14.746-6.52-3.13-2.73-7.045-7.41-11.735-14.04-5.032-7.08-9.169-15.29-12.41-24.65-3.471-10.11-5.211-19.9-5.211-29.378 0-10.857 2.346-20.221 7.045-28.068 3.693-6.303 8.606-11.275 14.755-14.925s12.793-5.51 19.948-5.629c3.915 0 9.049 1.211 15.429 3.591 6.362 2.388 10.447 3.599 12.238 3.599 1.339 0 5.877-1.416 13.57-4.239 7.275-2.618 13.415-3.702 18.445-3.275 13.63 1.1 23.87 6.473 30.68 16.153-12.19 7.386-18.22 17.731-18.1 31.002 0.11 10.337 3.86 18.939 11.23 25.769 3.34 3.17 7.07 5.62 11.22 7.36-0.9 2.61-1.85 5.11-2.86 7.51zM119.11 7.24c0 8.102-2.96 15.667-8.86 22.669-7.12 8.324-15.732 13.134-25.071 12.375a25.222 25.222 0 0 1-0.188-3.07c0-7.778 3.386-16.102 9.399-22.908 3.002-3.446 6.82-6.311 11.45-8.597 4.62-2.252 8.99-3.497 13.1-3.71 0.12 1.083 0.17 2.166 0.17 3.24z"/>
        </svg>
        <input type="text" class="url-input" placeholder="Search or enter website URL" value="">
        <svg class="minimize-button" style="width: 24px; height: 24px; margin-right: 8px; cursor: pointer;" viewBox="0 0 24 24">
          <path fill="#1d1d1f" d="M20 14H4v-2h16v2z"/>
        </svg>
        <svg style="width: 24px; height: 24px;" viewBox="0 0 24 24">
          <path fill="#1d1d1f" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
        </svg>
      </div>
    </div>

    <div class="sidebar">
      <button class="close-sidebar">
        <svg viewBox="0 0 24 24">
          <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
        </svg>
      </button>
      <div class="sidebar-content">
        <button class="sidebar-button">
          <svg viewBox="0 0 24 24">
            <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
          </svg>
          Home
        </button>
        <button class="sidebar-button">
          <svg viewBox="0 0 24 24">
            <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
          </svg>
          Favorites
        </button>
        <button class="sidebar-button">
          <svg viewBox="0 0 24 24">
            <path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/>
          </svg>
          History
        </button>
        <button class="sidebar-button">
          <svg viewBox="0 0 24 24">
            <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
          </svg>
          Downloads
        </button>
        <button class="sidebar-button">
          <svg viewBox="0 0 24 24">
            <path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"/>
          </svg>
          Settings
        </button>
      </div>
    </div>

    <div class="browser-content">
      <h1 style="text-align: center; font-size: 2.5em; margin-bottom: 20px;">Welcome to iPage</h1>
      <p style="text-align: center; font-size: 1.2em; color: #86868b;">
        Experience the web like never before with Apple's most innovative browser.
      </p>
    </div>
  </div>

  <script>
    const tabContents = [{
      title: 'Welcome',
      content: `
        <h1 style="text-align: center; font-size: 2.5em; margin-bottom: 20px;">Welcome to iPage</h1>
        <p style="text-align: center; font-size: 1.2em; color: #86868b;">
          Experience the web like never before with Apple's most innovative browser.
        </p>
      `
    }];

    const tabs = new Map();

    const toggleButton = document.querySelector('.toggle-sidebar');
    const closeButton = document.querySelector('.close-sidebar');
    const minimizeButton = document.querySelector('.minimize-button');
    const browserHeader = document.querySelector('.browser-header');
    const sidebar = document.querySelector('.sidebar');
    let sidebarOpen = false;

    function toggleSidebar() {
      sidebarOpen = !sidebarOpen;
      sidebar.classList.toggle('open');
    }

    toggleButton.addEventListener('click', toggleSidebar);
    closeButton.addEventListener('click', toggleSidebar);
  
    minimizeButton.addEventListener('click', (e) => {
      e.stopPropagation(); // Prevent event bubbling
      browserHeader.classList.toggle('minimized');
      
      // Hide sidebar if it's open when minimizing
      if (browserHeader.classList.contains('minimized') && sidebarOpen) {
        sidebar.classList.remove('open');
        sidebarOpen = false;
      }
    });

    // Allow clicking the minimized header to restore
    browserHeader.addEventListener('click', (e) => {
      if (browserHeader.classList.contains('minimized')) {
        browserHeader.classList.remove('minimized');
      }
    });

    const urlInput = document.querySelector('.url-input');
    urlInput.value = ''; // Reset to empty
    urlInput.placeholder = 'Search or enter website URL';

    // Initialize the first tab
    const firstTab = document.querySelector('.tab');
    if (firstTab) {
      const tabId = 'tab-initial';
      firstTab.dataset.tabId = tabId;
      tabs.set(tabId, {
        url: '',
        content: tabContents[0].content
      });
      setupTabListeners(firstTab);
    }

    // Show homepage content
    function showHomepage() {
      const browserContent = document.querySelector('.browser-content');
      browserContent.innerHTML = tabContents[0].content;
      urlInput.value = '';
    }

    showHomepage();

    urlInput.addEventListener('keypress', async (e) => {
      if (e.key === 'Enter') {
        const input = urlInput.value.trim();
        if (input) {
          const browserContent = document.querySelector('.browser-content');
          
          // Check if input is a URL
          const isUrl = input.includes('.') && !input.includes(' ');
          
          if (!isUrl) {
            // Display Google search results directly in an iframe
            const searchQuery = encodeURIComponent(input);
            const googleUrl = `https://www.google.com/search?q=${searchQuery}&igu=1`;
            
            browserContent.innerHTML = `
              <iframe 
                src="${googleUrl}"
                style="width: 100%; height: 800px; border: none;"
                sandbox="allow-same-origin allow-scripts allow-forms"
                title="Search Results">
              </iframe>
            `;
          } else {
            // Handle URL case
            try {
              const url = new URL(input.startsWith('http') ? input : `https://${input}`);
              browserContent.innerHTML = `
                <iframe 
                  src="${url.href}"
                  style="width: 100%; height: 800px; border: none;"
                  sandbox="allow-same-origin allow-scripts allow-forms allow-popups allow-presentation allow-top-navigation allow-modals"
                  referrerpolicy="origin"
                  loading="lazy"
                  importance="high"
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                  title="External Website">
                </iframe>
              `;
            } catch (error) {
              browserContent.innerHTML = '<div style="padding: 20px; color: #d93025;">Invalid URL</div>';
            }
          }

          // Update tab state
          const activeTab = document.querySelector('.tab.active');
          if (activeTab) {
            const tabId = activeTab.dataset.tabId;
            tabs.set(tabId, {
              url: input,
              content: browserContent.innerHTML
            });
          }
        }
      }
    });

    const newTabButton = document.querySelector('.new-tab-button');
    const tabsContainer = document.querySelector('.tabs-container');

    newTabButton.addEventListener('click', () => {
      const tabId = 'tab-' + Date.now(); // Unique ID for each tab
      const newTab = document.createElement('div');
      newTab.className = 'tab';
      newTab.dataset.tabId = tabId;
      newTab.innerHTML = `
        <span class="tab-title">AirTab</span>
        <button class="tab-close">
          <svg viewBox="0 0 24 24" width="12" height="12">
            <path fill="#1d1d1f" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
      `;
      
      // Initialize tab data
      tabs.set(tabId, {
        url: '',
        content: tabContents[0].content
      });
      
      tabsContainer.insertBefore(newTab, newTabButton);
      setupTabListeners(newTab);

      // Show welcome content for new tab
      const browserContent = document.querySelector('.browser-content');
      browserContent.innerHTML = tabContents[0].content;
      urlInput.value = '';

      // Activate the new tab
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      newTab.classList.add('active');
    });

    function setupTabListeners(tab) {
      const closeButton = tab.querySelector('.tab-close');
      closeButton.addEventListener('click', (e) => {
        e.stopPropagation();
        if (document.querySelectorAll('.tab').length > 1) {
          const tabId = tab.dataset.tabId;
          tabs.delete(tabId); // Clean up tab data
          tab.remove();
          // Activate the previous tab
          const remainingTabs = document.querySelectorAll('.tab');
          const lastTab = remainingTabs[remainingTabs.length - 1];
          lastTab.classList.add('active');
          // Restore last tab's content
          const lastTabId = lastTab.dataset.tabId;
          const lastTabData = tabs.get(lastTabId);
          if (lastTabData) {
            document.querySelector('.browser-content').innerHTML = lastTabData.content;
            urlInput.value = lastTabData.url;
          }
        }
      });

      tab.addEventListener('click', () => {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        
        // Restore tab's content
        const tabId = tab.dataset.tabId;
        const tabData = tabs.get(tabId);
        if (tabData) {
          document.querySelector('.browser-content').innerHTML = tabData.content;
          urlInput.value = tabData.url;
        }
      });
    }

    // Setup circle button functionality
    const circleButton = document.querySelector('.address-bar svg:last-child');
    circleButton.style.cursor = 'pointer';
    circleButton.addEventListener('click', showHomepage);

    // Setup listeners for existing tabs
    document.querySelectorAll('.tab').forEach(setupTabListeners);
  </script>
</body></html>
